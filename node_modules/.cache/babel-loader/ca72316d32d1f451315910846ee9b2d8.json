{"ast":null,"code":"import _slicedToArray from\"/Users/emmanuelakhereiyere/Desktop/Strive/Spice-App--React-Redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{v4 as uuidv4}from'uuid';import PostInputBar from'./PostInputBar';import{Card,Spinner,Button}from'react-bootstrap';import{RiWalkFill}from\"react-icons/ri\";import{FcLike,FcSms}from\"react-icons/fc\";import{AiOutlineHeart}from\"react-icons/ai\";import{useSelector,useDispatch}from'react-redux';import{fetchPosts,addLikes,removeLikes,getCurrentUser,getSinglePostComment,getPostId}from'../../redux/actions';import MyVerticallyCenteredModal from'./CommentModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Feeds=function Feeds(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalShow=_useState2[0],setModalShow=_useState2[1];var allPosts=useSelector(function(state){return state.posts.posts;});var postLikes=useSelector(function(state){return state.posts.likes;});var totalPosts=allPosts.length;// const loading = useSelector(state => state.posts.loading)\nvar loggedInCurrentUser=useSelector(function(state){return state.users.getcurrentuser;});// const getUserPostId = allPosts.filter(p => p.user.id === loggedInCurrentUser?.id)\n// console.log(allPosts)\n// console.log(postLikes)\nvar scrollTop=function scrollTop(){window.scrollTo(0,0);};useEffect(function(){dispatch(fetchPosts());scrollTop();},[]);useEffect(function(){dispatch(getCurrentUser());},[totalPosts]);var handleLikesCount=function handleLikesCount(post){var likesCount=postLikes.filter(function(p){return p.id===post.id;}).length;likesCounted(likesCount);return likesCount;};var ID=uuidv4();var likesCounted=function likesCounted(likesCount){return likesCount;};var countedLikes=likesCounted();// console.log(countedLikes)\nvar handleLikeToggle=function handleLikeToggle(e,post){return postLikes.find(function(p){return p.id===post.id;})?dispatch(removeLikes(post.id)):dispatch(addLikes(post));};var handleSinglePostComment=function handleSinglePostComment(e,post){console.log('clicked',post.id);return dispatch(getSinglePostComment(allPosts===null||allPosts===void 0?void 0:allPosts.find(function(p){return p.id===post.id;}))),setModalShow(true),dispatch(getPostId(post.id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col bg-gray-900\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex mb-4\",children:/*#__PURE__*/_jsx(PostInputBar,{})}),// loading\n//                     ? (<Spinner animation=\"border\" variant=\"success\" />)\n//                     :\nallPosts===null||allPosts===void 0?void 0:allPosts.map(function(post,i){var _post$user,_post$user2;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col align-items-center border-green-100  hover:bg-grey-50 rounded-lg\",children:/*#__PURE__*/_jsxs(Card,{className:\" mb-5 rounded-lg \",children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",className:\"img-fluid\",src:post.postImage}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap align-items-center justify-between text-blue-600 mb-4 mx-3 border-b-2 p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs flex align-items-center \",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"text-right w-10 h-10 rounded-full img-fluid\",src:(_post$user=post.user)===null||_post$user===void 0?void 0:_post$user.image,alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-1 \",children:/*#__PURE__*/_jsx(\"span\",{className:\" align-self-bottom\",children:(_post$user2=post.user)===null||_post$user2===void 0?void 0:_post$user2.firstName})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-muted \",children:post.createdAt})})]}),/*#__PURE__*/_jsxs(Card.Text,{className:\" text-center bg-gray-50 rounded\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"justify\"}),post.text]})]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-evenly  border-blue-800 border-b-2  pt-2 pb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return handleLikeToggle(e.target.value,post);},className:\"text-sm flex align-items-center cursor-pointer \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-1 text-lg\",children:(postLikes===null||postLikes===void 0?void 0:postLikes.find(function(p){return p.id===post.id;}))?/*#__PURE__*/_jsx(FcLike,{}):/*#__PURE__*/_jsx(AiOutlineHeart,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-1\",children:handleLikesCount(post)})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){return handleSinglePostComment(e,post);},className:\"text-sm flex cursor-pointer align-items-center  \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-1\",children:/*#__PURE__*/_jsx(FcSms,{})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Comment\"}),\" \"]})]})]})})]})},post.id)});}).reverse(),/*#__PURE__*/_jsx(MyVerticallyCenteredModal,{show:modalShow,onHide:function onHide(){return setModalShow(false);}})]});};export default Feeds;","map":{"version":3,"sources":["/Users/emmanuelakhereiyere/Desktop/Strive/Spice-App--React-Redux/src/components/Feeds/Feeds.jsx"],"names":["React","useEffect","useState","v4","uuidv4","PostInputBar","Card","Spinner","Button","RiWalkFill","FcLike","FcSms","AiOutlineHeart","useSelector","useDispatch","fetchPosts","addLikes","removeLikes","getCurrentUser","getSinglePostComment","getPostId","MyVerticallyCenteredModal","Feeds","dispatch","modalShow","setModalShow","allPosts","state","posts","postLikes","likes","totalPosts","length","loggedInCurrentUser","users","getcurrentuser","scrollTop","window","scrollTo","handleLikesCount","post","likesCount","filter","p","id","likesCounted","ID","countedLikes","handleLikeToggle","e","find","handleSinglePostComment","console","log","map","i","postImage","user","image","firstName","createdAt","text","target","value","reverse"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { v4 as uuidv4 } from 'uuid';\nimport PostInputBar from './PostInputBar'\nimport { Card, Spinner, Button } from 'react-bootstrap'\nimport { RiWalkFill } from \"react-icons/ri\";\nimport { FcLike, FcSms } from \"react-icons/fc\";\nimport { AiOutlineHeart } from \"react-icons/ai\";\nimport { useSelector, useDispatch, } from 'react-redux'\nimport { fetchPosts, addLikes, removeLikes, getCurrentUser, getSinglePostComment, getPostId, } from '../../redux/actions'\nimport MyVerticallyCenteredModal from './CommentModal'\n\n\n\n\nconst Feeds = () => {\n\n    const dispatch = useDispatch()\n    const [modalShow, setModalShow] = useState(false);\n\n    const allPosts = useSelector(state => state.posts.posts)\n    const postLikes = useSelector(state => state.posts.likes)\n\n\n    const totalPosts = allPosts.length\n    // const loading = useSelector(state => state.posts.loading)\n\n    const loggedInCurrentUser = useSelector(state => state.users.getcurrentuser)\n\n    // const getUserPostId = allPosts.filter(p => p.user.id === loggedInCurrentUser?.id)\n\n    // console.log(allPosts)\n\n\n\n\n    // console.log(postLikes)\n\n    const scrollTop = () => {\n        window.scrollTo(0, 0);\n    };\n\n    useEffect(() => {\n        dispatch(fetchPosts())\n        scrollTop()\n\n\n    }, [])\n\n    useEffect(() => {\n        dispatch(getCurrentUser())\n    }, [totalPosts])\n\n\n\n    const handleLikesCount = (post) => {\n\n        const likesCount = postLikes.filter(p => p.id === post.id).length;\n        likesCounted(likesCount)\n        return likesCount\n    }\n\n    const ID = uuidv4()\n\n\n\n    const likesCounted = (likesCount) => {\n        return likesCount\n    }\n\n    const countedLikes = likesCounted()\n    // console.log(countedLikes)\n\n    const handleLikeToggle = (e, post) => {\n        return postLikes.find(p => p.id === post.id) ? dispatch(removeLikes(post.id)) : (dispatch(addLikes(post)))\n\n    }\n\n\n\n    const handleSinglePostComment = (e, post) => {\n        console.log('clicked', post.id)\n        return (dispatch(getSinglePostComment(allPosts?.find(p => p.id === post.id))), setModalShow(true), dispatch(getPostId(post.id)))\n    }\n\n\n    return (\n        <div className='flex flex-col bg-gray-900' >\n            <div className='flex mb-4'>\n                <PostInputBar />\n            </div>\n            {\n\n                // loading\n                //                     ? (<Spinner animation=\"border\" variant=\"success\" />)\n                //                     :\n                allPosts?.map((post, i) => (\n                    <>\n                        <div key={post.id} className='flex flex-col align-items-center border-green-100  hover:bg-grey-50 rounded-lg'>\n\n                            <Card className=' mb-5 rounded-lg '  >\n                                <Card.Img variant=\"top\" className=\"img-fluid\" src={post.postImage} />\n                                <Card.Body>\n                                    <div className='flex flex-wrap align-items-center justify-between text-blue-600 mb-4 mx-3 border-b-2 p-1'>\n\n                                        <div className=\"text-xs flex align-items-center \">\n                                            <div>\n\n                                                <img className=\"text-right w-10 h-10 rounded-full img-fluid\" src={post.user?.image} alt=\"\" />\n                                            </div>\n                                            <div className='mx-1 '>\n\n                                                <span className=\" align-self-bottom\">{post.user?.firstName}</span>\n                                            </div>\n                                        </div>\n\n                                        <div className='flex'>\n                                            <span className=\"text-xs text-muted \">\n                                                {post.createdAt}\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <Card.Text className=' text-center bg-gray-50 rounded'>\n                                        <h6 className='justify'></h6>{post.text}\n                                    </Card.Text>\n                                </Card.Body>\n\n                                <Card.Body>\n                                    <div className='flex flex-wrap justify-evenly  border-blue-800 border-b-2  pt-2 pb-3'>\n                                        <div onClick={(e) => handleLikeToggle(e.target.value, post)} className=\"text-sm flex align-items-center cursor-pointer \">\n                                            <div className=\"mx-1 text-lg\" >\n                                                {postLikes?.find(p => p.id === post.id) ? < FcLike /> : < AiOutlineHeart />}\n                                            </div>\n                                            <div className=\"mx-1\" >\n                                                {handleLikesCount(post)}\n                                            </div>\n                                        </div>\n                                        <div onClick={(e) => handleSinglePostComment(e, post)} className=\"text-sm flex cursor-pointer align-items-center  \">\n                                            {/* {postId(post.id)} */}\n                                            <div className=\"mx-1\" >\n                                                <FcSms />\n                                            </div>\n\n                                            <div ><span>Comment</span> </div>\n\n                                        </div>\n\n                                        {/* <div className={getUserPostId[0].user.id === post.user?.id ? 'hidden' : \"visible text-sm flex align-items-center cursor-pointer  \"}> */}\n                                        {/* <div className={\"visible text-sm flex align-items-center cursor-pointer  \"}>\n\n                                                <div className=\"mx-1 \" >\n                                                    <RiWalkFill />\n                                                </div>\n                                                <div><span>Follow</span> </div>\n                                            </div> */}\n\n                                    </div>\n                                </Card.Body>\n                            </Card>\n\n                        </div>\n\n                    </>)).reverse()\n\n            }\n\n            <MyVerticallyCenteredModal\n                show={modalShow}\n                onHide={() => setModalShow(false)}\n            />\n        </div>\n    )\n}\n\nexport default Feeds\n"]},"metadata":{},"sourceType":"module"}