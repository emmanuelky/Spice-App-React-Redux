{"ast":null,"code":"import _slicedToArray from\"/Users/emmanuelakhereiyere/Desktop/Strive/Spice-App--React-Redux/spice-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Form,Container,Row,Col}from\"react-bootstrap\";import{FcVideoCall,FcAddImage,FcAdvertising}from\"react-icons/fc\";import{v4 as uuidv4}from'uuid';import{format}from'date-fns';import{useSelector,useDispatch}from'react-redux';import{fetchPosts,fetchUsers,addPosts,getCurrentUser}from'../../redux/actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostInputBar=function PostInputBar(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];console.log(image);var uploadImage=function uploadImage(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"emmanuelspice\");data.append(\"cloud_name\",\"emmanuelky\");fetch(\"https://api.cloudinary.com/v1_1/emmanuelky/image/upload\",{method:\"post\",body:data}).then(function(resp){return resp.json();}).then(function(data){console.log(data);setUrl(data.url);}).catch(function(err){return console.log(err);});};var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var dispatch=useDispatch();var getcurrentuser=useSelector(function(state){return state.users.getcurrentuser;});// console.log(getcurrentuser)\nuseEffect(function(){uploadImage();},[image.length]);useEffect(function(){dispatch(fetchUsers());dispatch(getCurrentUser());},[]);var ID=uuidv4();var currentDate=format(new Date(),'HH:mm b');var sendNewPost={id:ID,createdAt:currentDate,text:message,postImage:url,likes:[],updatedAt:currentDate,user:getcurrentuser,comments:{}};var handleInputChange=function handleInputChange(e){setMessage(e.target.value);};var handleOnSubmit=function handleOnSubmit(e){e.preventDefault();console.log(e.keyCode===13);if(e.keyCode===13){dispatch(addPosts(sendNewPost));setMessage('');setImage('');dispatch(fetchPosts());}};var handleAddPosts=function handleAddPosts(e){e.preventDefault();dispatch(addPosts(sendNewPost));setMessage('');setImage('');dispatch(fetchPosts());};return/*#__PURE__*/_jsx(Container,{fluid:true,className:\"my-5 justify-center mx-auto border-grey-100 pt-4 rounded-2xl border-blue-600 drop-shadow-2xl hover:border-green-900  border-b-4 border-t-4 shadow-2xl\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleAddPosts(e);},children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Form.Group,{className:\"mb-1\",controlId:\"exampleForm.ControlTextarea1\",children:/*#__PURE__*/_jsx(Form.Control,{className:\"text-area rounded-full\",as:\"textarea\",placeholder:\"Spice up your day!\",rows:4,value:message,onChange:function onChange(e){return handleInputChange(e);},onKeyUp:function onKeyUp(event){return handleOnSubmit(event);}})})}),/*#__PURE__*/_jsx(Row,{className:\"px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" my-4 flex flex-wrap justify-around align-items-center \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600 flex  p-1 hover:bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"span\",{className:\" \",children:/*#__PURE__*/_jsx(FcVideoCall,{})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600  flex  p-1 hover:bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsxs(Col,{md:2,className:\"flex\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"files\",className:\"btn\",children:/*#__PURE__*/_jsx(FcAddImage,{})}),/*#__PURE__*/_jsx(\"input\",{onClick:uploadImage,onChange:function onChange(e){return setImage(e.target.files[0]);},id:\"files\",className:\"hidden\",type:\"file\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600 flex  p-1 hover:bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"span\",{className:\"\",children:/*#__PURE__*/_jsx(FcAdvertising,{})})})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return handleAddPosts(e);},className:\"mx-1 mt-1 text-center text-light text-xl p-2 flex border-green-500 border-b-2 border-t-2 hover:border-green-900 rounded-full \",children:/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"span\",{className:\"text-center cursor-pointer\",children:\"post\"})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"img\",{className:image===''?'hidden':\"w-20 h-20 rounded-full\",src:url})})]})})]})});};export default PostInputBar;","map":{"version":3,"sources":["/Users/emmanuelakhereiyere/Desktop/Strive/Spice-App--React-Redux/spice-app/src/components/Feeds/PostInputBar.jsx"],"names":["React","useEffect","useState","Form","Container","Row","Col","FcVideoCall","FcAddImage","FcAdvertising","v4","uuidv4","format","useSelector","useDispatch","fetchPosts","fetchUsers","addPosts","getCurrentUser","PostInputBar","image","setImage","url","setUrl","console","log","uploadImage","data","FormData","append","fetch","method","body","then","resp","json","catch","err","message","setMessage","dispatch","getcurrentuser","state","users","length","ID","currentDate","Date","sendNewPost","id","createdAt","text","postImage","likes","updatedAt","user","comments","handleInputChange","e","target","value","handleOnSubmit","preventDefault","keyCode","handleAddPosts","event","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\nimport { FcVideoCall, FcAddImage, FcAdvertising } from \"react-icons/fc\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { format } from 'date-fns'\nimport { useSelector, useDispatch, } from 'react-redux'\nimport { fetchPosts, fetchUsers, addPosts, getCurrentUser } from '../../redux/actions'\n\n\nconst PostInputBar = () => {\n\n    const [image, setImage] = useState(\"\")\n    const [url, setUrl] = useState(\"\")\n\n\n\n    console.log(image)\n\n    const uploadImage = () => {\n        const data = new FormData()\n        data.append(\"file\", image)\n        data.append(\"upload_preset\", \"emmanuelspice\")\n        data.append(\"cloud_name\", \"emmanuelky\")\n        fetch(\"https://api.cloudinary.com/v1_1/emmanuelky/image/upload\", {\n            method: \"post\",\n            body: data\n        })\n            .then(resp => resp.json())\n            .then(data => {\n                console.log(data)\n                setUrl(data.url)\n\n            })\n            .catch(err => console.log(err))\n    }\n\n    const [message, setMessage] = useState('')\n    const dispatch = useDispatch()\n    const getcurrentuser = useSelector(state => state.users.getcurrentuser)\n    // console.log(getcurrentuser)\n\n\n    useEffect(() => {\n        uploadImage()\n    }, [image.length])\n\n    useEffect(() => {\n        dispatch(fetchUsers())\n        dispatch(getCurrentUser())\n\n    }, [])\n\n    const ID = uuidv4()\n    const currentDate = format(new Date(), 'HH:mm b')\n\n\n    const sendNewPost = {\n        id: ID,\n        createdAt: currentDate,\n        text: message,\n        postImage: url,\n        likes: [],\n        updatedAt: currentDate,\n        user: getcurrentuser,\n        comments: {},\n\n    }\n\n    const handleInputChange = (e) => {\n\n        setMessage(e.target.value)\n\n    }\n\n    const handleOnSubmit = (e) => {\n        e.preventDefault()\n        console.log(e.keyCode === 13)\n        if (e.keyCode === 13) {\n            dispatch(addPosts(sendNewPost))\n            setMessage('')\n            setImage('')\n            dispatch(fetchPosts())\n        }\n    }\n\n    const handleAddPosts = (e) => {\n        e.preventDefault();\n\n        dispatch(addPosts(sendNewPost))\n        setMessage('')\n        setImage('')\n        dispatch(fetchPosts())\n\n    }\n\n\n\n\n    return (\n        <Container fluid className=\"my-5 justify-center mx-auto border-grey-100 pt-4 rounded-2xl border-blue-600 drop-shadow-2xl hover:border-green-900  border-b-4 border-t-4 shadow-2xl\" >\n\n            <Form onSubmit={(e) => handleAddPosts(e)} >\n                <Row>\n                    <Form.Group\n                        className=\"mb-1\"\n                        controlId=\"exampleForm.ControlTextarea1\"\n                    >\n                        <Form.Control\n                            className=\"text-area rounded-full\"\n                            as=\"textarea\"\n                            placeholder=\"Spice up your day!\"\n                            rows={4}\n                            value={message}\n                            onChange={(e) => handleInputChange(e)}\n                            onKeyUp={event => handleOnSubmit(event)}\n                        />\n                    </Form.Group>\n                </Row>\n\n                <Row className='px-4'>\n                    <div className=\" my-4 flex flex-wrap justify-around align-items-center \">\n                        <div className=\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600 flex  p-1 hover:bg-green-100 rounded-lg\">\n                            <Col md={2}>\n                                <span className=\" \">\n                                    <FcVideoCall />\n                                </span>\n\n                            </Col>\n                        </div>\n                        <div className=\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600  flex  p-1 hover:bg-green-100 rounded-lg\">\n                            <Col md={2} className='flex'>\n\n\n                                <label for=\"files\" className=\"btn\"><FcAddImage /></label>\n                                <input onClick={uploadImage} onChange={(e) => setImage(e.target.files[0])} id=\"files\" className=\"hidden\" type=\"file\" />\n                            </Col>\n\n                        </div>\n                        <div className=\"mx-3 mt-1 cursor-pointer  text-light text-xl bg-gray-600 flex  p-1 hover:bg-green-100 rounded-lg\">\n                            <Col md={2}>\n\n                                <span className=\"\">\n                                    <FcAdvertising />\n\n                                </span>\n                            </Col>\n                        </div>\n                        <div onClick={(e) => handleAddPosts(e)} className=\"mx-1 mt-1 text-center text-light text-xl p-2 flex border-green-500 border-b-2 border-t-2 hover:border-green-900 rounded-full \">\n                            <Col md={2}>\n\n                                <span className=\"text-center cursor-pointer\">\n                                    post\n                                </span>\n                            </Col>\n                        </div>\n                        {/* <div className=\"mx-3 \"> */}\n                        <Col md={2}>\n                            {\n                                <img className={image === '' ? 'hidden' : \"w-20 h-20 rounded-full\"} src={url} />\n                            }\n                        </Col>\n                        {/* </div> */}\n\n\n                    </div>\n                </Row>\n\n            </Form>\n        </Container >\n    )\n}\n\nexport default PostInputBar\n"]},"metadata":{},"sourceType":"module"}